var paymentGoldPoint=function(a,o,e,t,i){var d,s=this;this.actionBtn=!1,this.callbackEvent="",this.currentTtid="",this.construct=function(){if(!document.getElementById("dotComFrame")){var a=document.createElement("div");a.id="dotComFrame",$("body").append(a)}},s.construct(),this.callDotCom=function(a,o){s.btnLoading(o),$(".loader").show(),d=setTimeout(function(){s.btnRest(o),$(".loader").hide()},5e3);var e=document.createElement("iframe");e.setAttribute("allowpaymentrequest",!0),e.setAttribute("allowtransparency",!0),e.src=a,e.name="pIframe",e.frameBorder=0,e.id="dot-com-frame",$("#dotComFrame").html(e),e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(s.btnRest(o),$(".loader").hide(),$("#dot-com-frame").focus())}},this.buyVipPlus=function(o,e,t,i){s.callDotCom(a+"?type="+e+"&uId="+t+"&tid="+i,o)},this.buyVipPlusPromotion=function(o,e,t,i){s.callDotCom(a+"?one_year=1&type="+e+"&uId="+t+"&tid="+i,o)},this.silentProfile=function(a){s.callDotCom(o+"?frame=1&ttid="+s.currentTtid,a)},this.buyCommonGoods=function(a){void 0!==a&&s.callDotCom(a)},this.rechargeGp=function(a,o,t){void 0===t&&(t=""),s.callDotCom(e+"&type="+a+"&au_id="+o+"&product_name="+t)},this.donation=function(a,o){void 0!=o?s.callDotCom(t+o,a):s.callDotCom(t,a)},this.setupWallet=function(a,o,e){s.callDotCom(i+"&type="+a+"&au_id="+o+"&charging_amount="+e)},this.setWalletPopup=function(a){void 0!==a&&s.callDotCom(a)},this.btnRest=function(a){a||(a=s.actionBtn),a&&(a.disabled=!1,$(a).removeClass("ldg"),clearTimeout(d))},this.btnLoading=function(a){a||(a=s.actionBtn),a&&(a.disabled=!0,$(a).addClass("ldg"))}};if(void 0===paymentGP){var paymentGP=new paymentGoldPoint(S_BUY_VIP_PLUS_FRAME_SRC,S_SILENT_TTID_PROFILE_FRAME_SRC,S_RECHARGE_GP_FRAME_SRC,S_DONATION_FRAME_SRC,S_SETUP_GP_WALLET_FRAME_SRC);paymentGP.currentTtid=U_TTID,window.paymentGP=paymentGP}function goToSilentProfile(a){paymentGP.silentProfile(a)}function vipPlusBtnEvent(a){HAS_ENABLE_VIP_PLUS&&paymentGP.buyVipPlus($(this).get(0),a)}function vipPlusPromotionBtnEvent(a){HAS_ENABLE_VIP_PLUS&&paymentGP.buyVipPlusPromotion($(this).get(0),a)}window.addEventListener?window.addEventListener("message",function(e){if("dev"===DEV_ENV||"https://www.tapatalk.com"===e.origin||"https://pop.tapatalk.com"===e.origin){var task=e.data.task;switch(task){case"com_call_back":var status=e.data.status,message=e.data.message,action=e.data.action,completed=e.data.completed;void 0!==action&&"closed"!=action?"login-forum"==action?window.location.href=S_BUY_GOODS_LOGIN_URL+"&product=vip_plus":"reload"==action?$("#dot-com-frame").length>0&&$("#dot-com-frame").attr("src",$("#dotComFrame iframe").attr("src")):"ready"!=action&&"onload"!=action||($(".loader").hide(),$("#dot-com-frame").attr("style","display:block;visibility: visible;"),$("#dot-com-frame").attr("class","dot-com-frame-ready"),void 0!=window.frames.pIframe&&window.frames.pIframe.postMessage({action:"visible",width:$(window).width(),height:$(window).height()},"*"),PHONEMODE):($("#dotComFrame").html(""),PHONEMODE,paymentGP.btnRest(),paymentGP.callbackEvent?paymentGP.callbackEvent(status,message,e.data):status&&completed&&document.location.reload(!0));break;case"iframe_all":$("#iframe_donate").addClass("window-all"),$("#iframe_donate_div").addClass("height0"),$(".donate-title").addClass("hide"),$(".donate-avatar-div").addClass("hide"),$(".donate_close").addClass("hide");break;case"donate":var action=e.data.action;void 0!==action&&"closed"==action&&$("#iframe_donate_div").empty();break;case"nav_login":nav_login_message(e);break;case"close_frame":var id=e.data.id;if(void 0!==id&&$("#"+id).removeClass("dot-com-frame-ready"),void 0!==e.data.function){var func=eval(e.data.function);func()}}}}):console.error("post message NOT Support");var vipPlusEventHasSetUp=!1;function setupVipPlusBtnEvent(){vipPlusEventHasSetUp||(vipPlusEventHasSetUp=!0,HAS_ENABLE_VIP_PLUS&&($(document).on("click",".vip-plus-btn-event",function(){if(U_IS_VIP_PLUS&&U_TTID)window.open(S_TTID_USER_URL+"#vipPlus");else if(!U_IS_VIP_PLUS)if($(this).attr("data-is-self"));else{var a=$(this).attr("data-type"),o=$(this).attr("data-user_id"),e=$(this).attr("data-tid");paymentGP.callbackEvent="",paymentGP.buyVipPlus($(this).get(0),a,o,e)}}),S_BUY_VIP_SHOW_POPUP&&U_IS_VIP_PLUS&&$(".vip-plus-btn-event").get(0).click()))}function newDonation(a,o){paymentGP.donation(a,o)}function check_award_from_forum(a){S_CANUSE_FORUM_WALLET&&(parseFloat($("#forum-current-gp-balance").val())>=a?($("#give-award-from-forum-option").show(),$("#give-award-from-forum").prop("checked",!0)):($("#give-award-from-forum-option").hide(),$("#give-award-from-forum").prop("checked",!1)))}function update_award_case(){var a=$("#give-award-with-free").val(),o=$("#give-award-with-like").val();1==parseInt(a)?(1==parseInt(o)?$("#award_description").html(L_GIVE_AWARD_DESC_LIKE_FREE):$("#award_description").html(L_GIVE_AWARD_DESC_FREE),$("#give_award_desciption_title").html(L_SILVER_AWARD_DESC_TITLE),$("#silver_award_option_subtitle").html('<i class="gold-coin"></i><div class="gold-amount"><span class="gold-point-erased">50</span></div>'),$("#give_award_desciption_details").html(L_SILVER_AWARD_DESC_DETAILS_FREE)):(1==parseInt(o)?$("#award_description").html(L_GIVE_AWARD_DESC_LIKE):$("#award_description").html(L_GIVE_AWARD_DESC),$("#give_award_desciption_title").html(L_SILVER_AWARD_DESC_TITLE),$("#silver_award_option_subtitle").html('<i class="gold-coin"></i><div class="gold-amount">50</div>'),$("#give_award_desciption_details").html(L_SILVER_AWARD_DESC_DETAILS));var e=parseInt($("#give-award-vip-free-silver").val());if(e>0){var t='<i class="vip-coin"></i><div class="gold-amount">'+e+" remaining</div>";$("#silver_award_option_subtitle").html(t)}var i=parseInt($("#give-award-vip-free-gold").val());if(i>0){var d='<i class="vip-coin"></i><div class="gold-amount">'+i+" remaining</div>";$("#gold_award_option_subtitle").html(d)}else $("#gold_award_option_subtitle").html('<i class="gold-coin"></i><div class="gold-amount">200</div>')}function choose_silver_award(){$("#choose_gold_award").removeClass("choosen_award"),$("#choose_diamond_award").removeClass("choosen_award"),$("#choose_silver_award").addClass("choosen_award"),$("#give-award-type").val(1),update_award_case(),check_award_from_forum(50)}function choose_gold_award(){$("#choose_silver_award").removeClass("choosen_award"),$("#choose_diamond_award").removeClass("choosen_award"),$("#choose_gold_award").addClass("choosen_award"),$("#give-award-type").val(2),$("#give_award_desciption_title").html(L_GOLD_AWARD_DESC_TITLE),$("#give_award_desciption_details").html(L_GOLD_AWARD_DESC_DETAILS),check_award_from_forum(200)}function choose_diamond_award(){$("#choose_silver_award").removeClass("choosen_award"),$("#choose_gold_award").removeClass("choosen_award"),$("#choose_diamond_award").addClass("choosen_award"),$("#give-award-type").val(3),$("#give_award_desciption_title").html(L_DIAMOND_AWARD_DESC_TITLE),$("#give_award_desciption_details").html(L_DIAMOND_AWARD_DESC_DETAILS),check_award_from_forum(500)}function check_gift_from_forum(a){S_CANUSE_FORUM_WALLET&&(parseFloat($("#forum-current-gp-balance").val())>=a?($("#give-gift-from-forum-option").show(),$("#give-gift-from-forum").prop("checked",!0)):($("#give-gift-from-forum-option").hide(),$("#give-gift-from-forum").prop("checked",!1)))}function choose_7days_vip_plus(){$("#choose_30days_vip_award").removeClass("choosen_award"),$("#choose_90days_vip_award").removeClass("choosen_award"),$("#choose_7days_vip_award").addClass("choosen_award"),$("#give-gift-type").val(4),check_gift_from_forum(99)}function choose_30days_vip_plus(){$("#choose_7days_vip_award").removeClass("choosen_award"),$("#choose_90days_vip_award").removeClass("choosen_award"),$("#choose_30days_vip_award").addClass("choosen_award"),$("#give-gift-type").val(5),check_gift_from_forum(299)}function choose_90days_vip_plus(){$("#choose_7days_vip_award").removeClass("choosen_award"),$("#choose_30days_vip_award").removeClass("choosen_award"),$("#choose_90days_vip_award").addClass("choosen_award"),$("#give-gift-type").val(6),check_gift_from_forum(897)}function setupGoldPointAward(){$("#choose_silver_award").on("click",function(){choose_silver_award()}),$("#choose_gold_award").on("click",function(){choose_gold_award()}).click(),$("#choose_diamond_award").on("click",function(){choose_diamond_award()}).click()}function setupVIPGift(){$("#choose_7days_vip_award").on("click",function(){choose_7days_vip_plus()}).click(),$("#choose_30days_vip_award").on("click",function(){choose_30days_vip_plus()}).click(),$("#choose_90days_vip_award").on("click",function(){choose_90days_vip_plus()}).click()}function rechargeGp(a,o,e,t){void 0!==o&&o&&(paymentGP.callbackEvent=o),paymentGP.rechargeGp(a,e,t)}function setupWallet(a,o,e,t){void 0!==o&&o&&(paymentGP.callbackEvent=o),paymentGP.setupWallet(a,e,t)}function buyCommonGoods(a,o){void 0!==a&&a&&(paymentGP.callbackEvent=a),paymentGP.buyCommonGoods(o)}function setWalletPopup(a,o){void 0!==a&&a&&(paymentGP.callbackEvent=a),paymentGP.setWalletPopup(o+"?w="+$(window).width())}function setWalletPopup(a,o){void 0!==a&&a&&(paymentGP.callbackEvent=a),paymentGP.setWalletPopup(o+"?w="+$(window).width())}setupVipPlusBtnEvent();