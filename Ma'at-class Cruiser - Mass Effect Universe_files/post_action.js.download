function auto_dislike_click(e){TT.setTTOption("AUTO_DISLIKE_DEFALT",!e.checked)}function checkAttitudesBlock(e,a){var t="div[name='"+e+"-"+a+"-count']";return $("."+e).find(t).length<=0&&(t="","diamondaward"!=a&&"goldaward"!=a&&"silveraward"!=a&&"vipgift7days"!=a&&"vipgift30days"!=a&&"vipgift90days"!=a||(t+='<div name="'+e+"-"+a+'-count" class="like-count cl-af hide ">\n    <div name="'+e+"-"+a+'-box" class="box" data-post_id="'+e+'">\n        <div class="icon">\n            <i name="'+e+"-"+a+'-attitude-icon"\n               data-post_id="'+e+'"\n               class="award-list award-icon '+a+'"></i>\n        </div>\n        <span name="'+e+"-"+a+'-preview-users" class="preview-users"></span>\n    </div>\n    <div name="'+e+"-"+a+'-user-list-background" class="like-user-list-close like-user-list-background hide">\n        <div class="like-user-list">\n            <div class="sum"><span name="'+e+"-"+a+'-sum-num" class="sum-num"></span> <i class="like-user-list-close fa fa-close"></i></div>\n            <div class="scroll-container">\n                <div class="scroll-content">\n                    <ul></ul>\n                    <div name="'+e+"-"+a+'-more" class="more">More</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),"dislike"!=a&&"like"!=a||(t+='<div name="'+e+"-"+a+'-count" class="like-count cl-af hide ">\n    <div name="'+e+"-"+a+'-box" class="box" data-post_id="'+e+'">\n        <div class="icon '+("like"==a?"emotion-like-tips":"")+'">\n            <i class="award-icon '+("like"==a?a+"18":a)+'"></i>\n        </div>\n        <span name="'+e+"-"+a+'-preview-users" class="preview-users"></span>\n    </div>\n    <div name="'+e+"-"+a+'-user-list-background" class="like-user-list-close like-user-list-background hide">\n        <div class="like-user-list">\n            <div class="sum">\n                <span name="'+e+"-"+a+'-sum-num" class="sum-num"></span>\n                <i class="like-user-list-close fa fa-close"></i>\n            </div>\n            <div class="scroll-container">\n                <div class="scroll-content">\n                    <ul></ul>\n                    <div name="'+e+"-"+a+'-more" class="more">More</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),"emotion"==a&&(t+='<div name="'+e+"-"+a+'-count" class="like-count cl-af hide ">\n    <div name="'+e+"-"+a+'-box" class="box" data-post_id="'+e+'">\n        <div class="icon" style="vertical-align: middle;margin-top: 8px;">\n        </div>\n        <span name="'+e+"-"+a+'-preview-users" class="preview-users"></span>\n    </div>\n    <div name="'+e+"-"+a+'-user-list-background" class="like-user-list-close like-user-list-background hide">\n        <div class="like-user-list">\n            <div class="sum">\n                <span name="'+e+"-"+a+'-sum-num" class="sum-num"></span>\n                <i class="like-user-list-close fa fa-close"></i>\n            </div>\n            <div class="scroll-container">\n                <div class="scroll-content">\n                    <ul></ul>\n                    <div name="'+e+"-"+a+'-more" class="more">More</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),$("."+e).append(t)),!0}function checkAwardFlagBlock(e,a){if("goldaward"==(a="diamondaward"==a?"diamond":a)&&(a="gold"),0==parseInt(e))return"";var t="#award_"+a+"_data_"+e,i=getFullPostDataFormId(e),n=BOARD_URL+"ucp.php?i=pm&amode=compose&action=prefillaward&p="+e;return $("#post_container"+e).find(t).length<=0&&(t="","diamond"!=a&&"gold"!=a||(t+='<div id="award_'+a+"_flag_"+e+'" class="award_corner_promotion hide ">\n                    <a ',void 0!==i.S_CAN_GIVE_AWARD&&0!=i.S_CAN_GIVE_AWARD&&(t+=' class="give-award" '),t+=' data-post_id="'+e+'" data-post-ttid="'+i.U_POST_TTID+'" data-post-name="'+i.POST_AUTHOR+'" data-post-pm-link="'+n+'">\n                        <i class="post_'+a+'_flag"></i>\n                    </a>\n                </div>'),$("#post_content"+e+"_award_block").append(t)),!0}function SetupPostJs(){var a=$(".like-post"),e=$(".give-award"),t=$(".pin-topic"),i=$(".vip-gift-award"),n=!1,_={},f={},k={},g={},h={},w={},b={},A={},R={},T={},C={},I={},S={},j={},x={},D={},E={},P={};function y(e,a){var t,i;null!=e.attitude&&(checkAttitudesBlock(a,e.attitude),t=a+"-"+e.attitude,parseInt(e.count)?$("[name="+t+"-count]").removeClass("hide"):($("[name="+t+"-count]").addClass("hide"),"emotion"==e.attitude&&($("[name="+a+"-emotion]").attr("class","emotion-post like-post"),$("[name="+a+"-emotion-like-text]").html("Like"),$("[name="+a+"-emotion]").find(".like-reaction").show())),$("[name="+t+"]").removeClass("tapatalk-theme-color"),$("[name="+t+"]").removeClass("liked"),"emotion"==e.attitude&&null!=e.emotion_types&&0<e.emotion_types.length&&(i="",$.each(e.emotion_types,function(e,a){i+=0==e?'<i class="emotion-icon-block '+a+"18 emotion-z-index-"+e+'"></i>':'<i class="emotion-icon-block '+a+"18 emotion-z-index-"+e+" emotion-left-"+e+'"></i>'}),$("[name="+t+"-box]").find(".icon").html(i)),null!=e.preview_count&&"emotion"!=e.attitude&&$("[name="+t+"-sum-num]").text(e.preview_count),"like"!=e.attitude&&"dislike"!=e.attitude||$("[name="+t+"-like-text]").html(e.attitude),$("[name="+t+"-preview-users]").html(e.like_preview_users))}function r(e,a,t){null!=e.refresh&&y(e.refresh,t),parseInt(e.total)?$("[name="+a+"-count]").removeClass("hide"):$("[name="+a+"-count]").addClass("hide"),parseInt(e.like)?$("[name="+a+"]").addClass("tapatalk-theme-color"):$("[name="+a+"]").removeClass("tapatalk-theme-color"),null!=e.preview_count&&$("[name="+a+"-sum-num]").text(e.preview_count),$("[name="+a+"-preview-users]").html(e.preview),_[t]=void 0,g[t]=!0,f[t]=void 0,h[t]=!0}function L(e,i,n,s,o,d,a){e.error?"Gold point insufficient balance"==e.error?rechargeGp("dislike",function(e,a,t){1==e&&$.ajax({url:i,type:"post",data:n,dataType:"json",processData:!1,contentType:!1,success:function(e){e.error?hs_popup(e.error):(o&&TT.setTTOption("AUTO_DISLIKE",!0),r(e,s,d))},error:function(){hs_popup("something wrong with server")}})},a):hs_popup(e.error):o&&TT.setTTOption("AUTO_DISLIKE",!0),r(e,s,d)}$(t).unbind("click"),t.on("click",function(e){var a;a=' <div class="notice-message responsive bg2" style="">\n        <div class="notice-title">\n            <span class="notice-title-content">'+L_PIN_TOPIC+'</span>\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"  > × </button>\n        </div>\n        <div>\n            <p class="pin_topic_title" style="">'+L_PIN_TOPIC+'</p>\n            <p class="msg" id="pin_topic_desc" style="">'+L_PIN_TOPIC_DESC_7DAYS+'</p>\n            <div>\n                <button id="pin_details_1" type="button" class="pin_topic_detail_frame">\n                    <div class="pin_topic_detail_1" >  </div>\n                    <div class="pin_topic_detail_title">'+L_PIN_TOPIC_DETAILS_TITLE1+'</div>\n                    <div class="pin_topic_detail_desc" >'+L_PIN_TOPIC_DETAILS_DESC1+'</div>\n                </button>\n                <button id="pin_details_2" type="button" class="pin_topic_detail_frame">\n                    <div class="pin_topic_detail_2" >  </div>\n                    <div class="pin_topic_detail_title">'+L_PIN_TOPIC_DETAILS_TITLE2+'</div>\n                    <div class="pin_topic_detail_desc" >'+L_PIN_TOPIC_DETAILS_DESC2+'</div>\n                </button>\n                <button id="pin_details_3" type="button" class="pin_topic_detail_frame">\n                    <div class="pin_topic_detail_3" > </div>\n                    <div class="pin_topic_detail_title">'+L_PIN_TOPIC_DETAILS_TITLE3+'</div>\n                    <div class="pin_topic_detail_desc" >'+L_PIN_TOPIC_DETAILS_DESC3+'</div>\n                </button>\n            </div>\n        </div>\n        <div class="bottom">\n            <input id="pin-topic-type" name="pin topic type" type="hidden" value="1"/>\n            \x3c!--<span style="float: left; margin-left: 40px;margin-top: 10px;">Balance: <span id="current-GP-balance">0</span> GP</span>--\x3e\n            <button id="pin_topic_button" class="button specialbutton award_button tapatalk-theme-background fs-16" style="min-width:144px;" >'+L_PIN_TOPIC_7DAYS+'</button>\n            <input id="pin_topic_option" name="pin topic option" type="hidden" />\n            <p class="pin_switch_option">\n                <span id="switch_pin_30_option" class="pin_switch_option_title">'+L_SWITCH_PIN_30DAYS+'</span>\n                <span id="switch_pin_7_option" class="pin_switch_option_title" hidden>'+L_SWITCH_PIN_7DAYS+"</span>\n                <br><br><span>"+L_UNPIN_WARNING+"</span>\n            </p>\n        </div>\n    </div>\n",$("#global_pin_topic").html(a);var t=$(this).attr("data-post-topic_id"),s=U_TTID,i=U_MODERATE_PIN_TOPIC,o=function(i,n){var e=new FormData;e.append("pin_type",n),$.ajax({url:U_PIN_TOPIC_MCP_LINK,type:"post",data:e,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){loader.css("display","block")},success:function(e){if(1==e.status)hs_popup({message:"Congrats! The topic has been successfully pinned.",refresh:!0,type:"success"});else{var a="pin_30_days";switch(n){case 1:a="pin_7_days";break;case 2:a="pin_30_days"}1==e.code?rechargeGp("pin_topic",function(e,a,t){e?o(i,n):console.log("re-charge GP failed")},s,a):e.error&&hs_popup(e.error)}},error:function(e){hs_popup("Oops. Something went wrong. Please try again later. "),e.error&&console.log(e.error)},complete:function(){loader.css("display","none")}})};i?(gaSendEvent("pin_topic","moderate_pin_topic","topic"),o(t,2)):(gaSendEvent("pin_topic","pin_topic_popup","topic"),hs_pin_post(t,function(e,a){gaSendEvent("pin_topic","user_pin_topic","topic"),o(e,a)}))});function O(e,a,_,i,n,f,k){var t=e.attr("data-post_id"),g=e.attr("data-post-ttid"),h=e.attr("data-post-name"),w=e.attr("data-post-pm-link"),y=U_TTID;_?gaSendEvent("reward","click_award_popup","post_free"):0<(a=parseFloat(a))?gaSendEvent("reward","click_award_popup","post_forum_wallet"):gaSendEvent("reward","click_award_popup","post"),hs_give_award(t,h,g,a,_,i,n,f,function(d,r,e,l,p){1!=parseInt(r)&&(_=0);var a=1==r&&0<n||2==r&&0<i?1:0;_?gaSendEvent("reward","give_award","post_free"):a?gaSendEvent("reward","give_award","post_vip"):p?gaSendEvent("reward","give_award","post_forum_wallet"):gaSendEvent("reward","give_award","post");var t=new FormData;t.append("award_type",r),t.append("post_id",d),t.append("award_anonymously",e),t.append("give_award_from_forum",p),t.append("free_gift",_),t.append("vip_free",a),t.append("post_id",d);var c,u=d+"-give-award",m="silver_award";switch(parseInt(r)){case 1:default:c=d+"-silveraward",m="silver_award",checkAttitudesBlock(d,"silveraward");break;case 2:c=d+"-goldaward",m="gold_award",checkAttitudesBlock(d,"goldaward"),checkAwardFlagBlock(d,"goldaward"),checkAwardFlagBlock(d,"diamondaward");break;case 3:c=d+"-diamondaward",m="diamond_award",checkAttitudesBlock(d,"diamondaward"),checkAwardFlagBlock(d,"goldaward"),checkAwardFlagBlock(d,"diamondaward");break;case 4:m="7_days_vip_plus"}var v=function(){$.ajax({url:BOARD_URL+"app.php/award/post",type:"post",data:t,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){loader.css("display","block")},success:function(e){if(0==e.status||e.error)1==e.code?rechargeGp("post_award",function(e,a,t){e?v():console.log("re-charge GP failed")},y,m):e.error?hs_popup(e.error):e.description&&hs_popup(e.description);else{hs_award_result("Thank you! We've sent the award to "+h+"!",!1,"gift_award"),l&&showPMCompose(w+"&award_type="+parseInt(r)+"&target_auid="+parseInt(g));function a(e){switch(parseInt(e)){case 1:default:break;case 2:i.addClass("hide"),t.removeClass("hide"),n.addClass("hide"),s.addClass("hasflag");break;case 3:i.removeClass("hide"),t.addClass("hide"),n.addClass("hide"),s.addClass("hasflag")}}var t=$("#award_gold_flag_"+d),i=$("#award_diamond_flag_"+d),n=$("#vip_promotion_flag_"+d),s=$("#post_content"+d);if((3<=parseInt(r)||i.hasClass("hide")&&2<=parseInt(r))&&a(r),parseInt(e.total)&&($("[name="+c+"-count]").removeClass("hide"),$("[name="+c+"-box]").removeClass("hide"),$("[name="+c+"-preview-users]").removeClass("hide"),$("[name="+u+"]").addClass("given"),$("[name="+u+"]").addClass("tapatalk-theme-color"),$("[name="+u+"-title]").html("Gifted")),null!=e.preview_count&&$("[name="+c+"-sum-num]").text(e.preview_count),$("[name="+c+"-preview-users]").html(e.preview),b[d]=void 0,T[d]=!0,A[d]=void 0,C[d]=!0,R[d]=void 0,I[d]=!0,S[d]=void 0,D[d]=!0,j[d]=void 0,E[d]=!0,x[d]=void 0,P[d]=!0,p){var e=$("#forum_gp_balance").html().replace(",",""),o=parseFloat(e);switch(r){case"1":o-=50;break;case"2":o-=200;break;case"3":o-=500;break;case"4":o-=99;break;case"5":o-=299;break;case"6":o-=897}e=(o=o<0?0:o).toLocaleString("en",{useGrouping:!0}),$("#forum_gp_balance").html(e)}f&&_&&!k&&setupWallet("like_free_award",function(e,a,t){},y,0)}},error:function(e){hs_popup(e.error)},complete:function(){loader.css("display","none")}})};v()})}function s(e,a,t,i,n,s,o){var d=e.attr("data-post_id"),r=e.attr("data-post-ttid"),l=e.attr("data-post-name"),p=e.attr("data-post-pm-link"),c=U_TTID;0<(a=parseFloat(a))?gaSendEvent("reward","click_vip_gift","post_forum_wallet"):gaSendEvent("reward","click_vip_gift","post"),hs_give_vip(d,l,r,a,function(e,t,a,i,n){n?gaSendEvent("reward","give_vip_gift","post_forum_wallet"):gaSendEvent("reward","give_vip_gift","post");var s=new FormData;s.append("award_type",t),s.append("post_id",e),s.append("award_anonymously",a),s.append("give_award_from_forum",n);var o="7_days_vip_plus";switch(parseInt(t)){case 1:default:o="7_days_vip_plus";break;case 2:o="30_days_vip_plus";break;case 3:o="90_days_vip_plus";break;case 4:o="7_days_vip_plus"}var d=function(){$.ajax({url:BOARD_URL+"app.php/award/post",type:"post",data:s,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){loader.css("display","block")},success:function(e){if(0==e.status||e.error)1==e.code?rechargeGp("post_award",function(e,a,t){e?d():console.log("re-charge GP failed")},c,o):e.error?hs_popup(e.error):e.description&&hs_popup(e.description);else if(hs_award_result("Thank you! We've sent the VIP+ to "+l+"!",!0,"gift_vip"),i&&showPMCompose(p+"&award_type="+parseInt(t)+"&target_auid="+parseInt(r)),n){var e=$("#forum_gp_balance").html().replace(",",""),a=parseFloat(e);switch(t){case"4":a-=99;break;case"5":a-=299;break;case"6":a-=897}e=(a=a<0?0:a).toLocaleString("en",{useGrouping:!0}),$("#forum_gp_balance").html(e)}},error:function(e){hs_popup(e.error)},complete:function(){loader.css("display","none")}})};d()})}function F(i,n,s){S_CANUSE_FORUM_WALLET?$.ajax({url:BOARD_URL+"app.php/buy/get_forum_balance",type:"post",data:[],dataType:"json",processData:!1,contentType:!1,beforeSend:function(){loader.css("display","block")},success:function(e){var a=0,t=0;e.freeGoldAwardCount&&(t=e.freeGoldAwardCount),e.freeSilverAwardCount&&(a=e.freeSilverAwardCount),e.status&&e.GPbalance?(e=e.GPbalance,n(i,e,0,t,a,s,!0)):n(i,0,0,t,a,s,!0)},error:function(e){console.log(e),n(i,0,0,0,0,s,!0)},complete:function(){loader.css("display","none")}}):$.ajax({url:BOARD_URL+"app.php/buy/get_auid_balance",type:"post",data:[],dataType:"json",processData:!1,contentType:!1,beforeSend:function(){loader.css("display","block")},success:function(e){var a=0,t=0;e.freeGoldAwardCount&&(t=e.freeGoldAwardCount),e.freeSilverAwardCount&&(a=e.freeSilverAwardCount),e.status&&e.free_gift?n(i,0,e.free_gift,t,a,s,"0"!=e.payment_method):n(i,0,0,t,a,s,!0)},error:function(e){console.log(e),n(i,0,0,0,0,s,!0)},complete:function(){loader.css("display","none")}})}$(a).unbind("click"),a.on("click",function(){var r,l,p,c,e,u,m,v;n||(r=$(this),l=new FormData,p=r.data("post_id"),c=r.attr("name"),e=r.find("input").val(),u=BOARD_URL+c.split("-")[1]+"/post","emotion"==c.split("-")[1]&&(u=BOARD_URL+"like/post"),m=r.attr("data-post-can-award"),v=r.attr("data-post-can-gift-vip"),l.append("post_id",p),l.append("emotion",e),checkAttitudesBlock(p,c.split("-")[1]),a.hasClass("tapatalk-theme-color")||"dislike"!=c.split("-")[1]||gaSendEvent("dislike","click_dislike","user/vip/guest"),$.ajax({url:u,type:"post",data:l,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){n=!0},error:function(e,a,t){},complete:function(){n=!1},success:function(e){if(e.error){var a,t=0,i=!1;if(1<e.ttid&&(t=Number(e.ttid)),"Gold point insufficient balance"==e.error)return l.append("dislike_gold","true"),0==t?void hs_popup("Please log in to your Tapatalk Account!"):void L(e,u,l,c,i,p,t);e.changebtn?(gaSendEvent("dislike","time_limit_popup","user/vip"),(a=$("#global_confirm")).find(".notice-message").addClass("notice-message3"),a.find(".center-line").addClass("show-center-line"),a.find(".yes").next().css("display","none"),a.find(".yes").html("Continue"),a.find(".msg-title").html("Dislike Post"),a.find(".msg-title").addClass("msg-title-css"),a.find(".bottom").addClass("bottom-edit"),a.find(".notify_box").empty(),a.find(".add_content").empty(),a.find(".icon_pop").css("background-image","url(data:image/png;base64,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)"),s="",TT.getTTOption("AUTO_DISLIKE_DEFALT")||(s="checked"),addhtml='<div style="margin-bottom: 10px;" class="drak_white" >The number of Gold Points required to dislike this post is based on the last time you disliked a post. '+e.gold+" Gold Points cost $"+e.gold/100+' USD. Click “Continue” to dislike now.</div><input type="checkbox" '+s+' onclick="auto_dislike_click(this)" name="auto_dislike" style="margin-top: -2px;"><span style="margin-left:4px;">Don\'t ask me in the future</span>',a.find(".notify_box").append(addhtml),hs_confirm({message:e.error,title:"Dislike Post",callback:function(){i=a.find('input[name="auto_dislike"]').is(":checked"),l.append("auto_dislike",i),l.append("dislike_gold","true"),$.ajax({url:u,type:"post",data:l,dataType:"json",processData:!1,contentType:!1,success:function(e){L(e,u,l,c,i,p,t)},error:function(e){hs_popup("something wrong with server")}})}})):hs_popup(e.error)}else{null!=e.refresh&&y(e.refresh,p),parseInt(e.total)?$("[name="+c+"-count]").removeClass("hide"):$("[name="+c+"-count]").addClass("hide");var n,s,o=parseInt(e.act),d=c.split("-")[1];"dislike"==d?o?($("[name="+c+"]").addClass("tapatalk-theme-color"),$("[name="+c+"]").addClass("liked"),$("[name="+c+"-like-text]").html("DisLiked"),$("[name="+p+"-emotion]").attr("class","emotion-post like-post"),$("[name="+p+"-emotion-like-text]").html("Like"),$("[name="+p+"-emotion]").find(".like-reaction").show(),$("[name="+p+"-like]").attr("class","emotion-post like-post"),$("[name="+p+"-like-like-text]").html("Like"),$("[name="+p+"-like]").find(".like-reaction").show(),$("[name="+p+"-emotion]").find("input").val("like"),$("[name="+p+"-like]").find("input").val("like"),$("[name="+p+"-emotion]").attr("name",p+"-like"),$("[name="+p+"-like]").find(".emotion-text").addClass("hide"),$("[name="+p+"-emotion]").find(".emotion-text").addClass("hide"),$("[name="+p+"-like]").find(".emotion-text").html("like"),$("[name="+p+"-emotion]").find(".emotion-text").html("like")):($("[name="+c+"]").removeClass("tapatalk-theme-color"),$("[name="+c+"]").removeClass("liked"),$("[name="+c+"-like-text]").html("Dislike")):(0<e.emotion_types.length&&(n="",$.each(e.emotion_types,function(e,a){n+=0==e?'<i class="emotion-icon-block '+a+"18 emotion-z-index-"+e+'"></i>':'<i class="emotion-icon-block '+a+"18 emotion-z-index-"+e+" emotion-left-"+e+'"></i>'}),$("[name="+c+"-box]").find(".icon").html(n)),o?(s="Selector selectorFace  emotion-post  like-post  liked "+e.emotion+"18",$("[name="+c+"]").attr("class",s),$("[name="+c+"]").find(".emotion-text").removeClass("hide"),$("[name="+c+"]").find(".like-reaction").hide(),$("[name="+c+"-like-text]").html("Like")):($("[name="+c+"]").removeClass("tapatalk-theme-color"),$("[name="+c+"]").removeClass("liked"),$("[name="+c+"-like-text]").html("Like"),""!=e.emotion&&($("[name="+c+"]").attr("class","emotion-post  like-post"),$("[name="+c+"]").find("input").val("like"),$("[name="+c+"]").find(".emotion-text").addClass("hide"),$("[name="+c+"]").find(".emotion-text").html("Like"),$("[name="+c+"]").find(".like-reaction").show(),$("[name="+c+"]").attr("name",p+"-like")))),null!=e.preview_count&&""!=e.preview_count&&$("[name="+c+"-sum-num]").text(e.preview_count),$("[name="+c+"-preview-users]").html(e.preview),_[p]=void 0,g[p]=!0,f[p]=void 0,h[p]=!0,k[p]=void 0,w[p]=!0,"like"==d&&o&&("1"==m||"1"==v?(o=(new Date).getTime(),localStorage.getItem("like_award_trigger")?gaSendEvent("like","post","award_triggered"):(F(r,O,!0),localStorage.setItem("like_award_trigger",o),gaSendEvent("like","post","award_trigger"))):gaSendEvent("like","post","user_cant_award"),gaSendEvent("like","post","succeed"))}}}))}),$(e).unbind("click"),e.on("click",function(){F($(this),O,!1)}),$(i).unbind("click"),i.on("click",function(){F($(this),s,!1)}),$(".like-user-list-close").unbind("click"),$(".like-user-list-close").on("click",function(e){var a=$(e.target),e=$(this).attr("name");a.hasClass("like-user-list-close")&&($("[name="+e+"]").addClass("hide"),$("body").css("overflow","initial"))});i=function(e){if("A"!=e.target.tagName&&"not_vip_box"!=this.classList[1]){var a=$(this),i=a.data("post_id"),t=a.attr("name"),n=t.split("-")[1],e=n,s=a.attr("emotion");null==s&&(s=99),"silveraward"!=n&&"goldaward"!=n&&"diamondaward"!=n&&"vipgift7days"!=n&&"vipgift30days"!=n&&"vipgift90days"!=n||(e="award");var o=$("[name="+t.split("-")[0]+"-"+t.split("-")[1]+"-user-list-background]"),e=BOARD_URL+e+"/post/users";if(o.removeClass("hide"),$("body").css("overflow","hidden"),"like"==n){if(_[i])return;var d=g[i]}else if("dislike"==n){if(f[i])return;d=h[i]}else if("emotion"==n){if(k[i])return;d=w[i]}else if("silveraward"==n){if(b[i])return;d=T[i]}else if("goldaward"==n){if(A[i])return;d=A[i]}else if("diamondaward"==n){if(R[i])return;d=I[i]}else if("vipgift7days"==n){if(S[i])return;d=D[i]}else if("vipgift30days"==n){if(j[i])return;d=E[i]}else if("vipgift90days"==n){if(x[i])return;d=P[i]}o.find(".emotion-loading").removeClass("hide");var r=o.find("ul");d&&r.empty();var l={post_id:i};switch(n){case"silveraward":l.award_type=1;break;case"goldaward":l.award_type=2;break;case"diamondaward":l.award_type=3;break;case"vipgift7days":l.award_type=4;break;case"vipgift30days":l.award_type=5;break;case"vipgift90days":l.award_type=6}"emotion"==n&&(l.emotion_type=s),$.get(e,l,function(e){if("like"==n?g[i]=!1:"dislike"==n?h[i]=!1:"emotion"==n?w[i]=!1:"silveraward"==n?T[i]=!1:"goldaward"==n?C[i]=!1:"diamondaward"==n?I[i]=!1:"vipgift7days"==n?D[i]=!1:"vipgift30days"==n?E[i]=!1:"vipgift90days"==n&&(P[i]=!1),e&&e.start&&e.data&&e.data.length){"like"==n?_[i]=e.start:"dislike"==n?f[i]=e.start:"emotion"==n?k[i]=e.start:"silveraward"==n?b[i]=e.start:"goldaward"==n?A[i]=e.start:"diamondaward"==n?R[i]=e.start:"vipgift7days"==n?S[i]=e.start:"vipgift30days"==n?j[i]=e.start:"vipgift90days"==n&&(x[i]=e.start),null!=e.title&&e.title&&$.each(e.title,function(e,a){a=parseInt(a),e=$("."+i+"-emotion-"+e+"-count");0<a?(e.html(a),e.parent().removeClass("hide")):(e.html(0),e.parent().addClass("hide"))}),o.find(".emotion-loading").addClass("hide");for(var a,t=0;t<e.data.length;t++)e.data[t].avatar&&e.data[t].username&&(a="<li>"+e.data[t].avatar+e.data[t].username+"</li>",""!=e.data[t].emotion&&(a="<li><div class='li-emotion'>"+e.data[t].avatar+e.data[t].emotion+"</div>"+e.data[t].username+"</li>"),r.append(a));e.data.length<5?o.find(".more").addClass("hide"):o.find(".more").removeClass("hide")}else 0<parseInt(s)&&($("."+i+"-emotion-"+parseInt(s)+"-count").html(0),r.html("<li style='text-align: center;'>No Users</li>")),o.find(".more").addClass("hide"),o.find(".emotion-loading").addClass("hide");p=!1},"json")}};$(".like-count .box").unbind("click"),$(".like-count .box").on("click",i),$(".award-list").unbind("click"),$(".award-list").on("click",i);var p=!1;$(".emotion-tab").unbind("click"),$(".emotion-tab").on("click",function(){var e=$(this).find("span").html();if(0==parseInt(e))return!1;if(p)return!1;p=!0,$(this).parent().find(".emotion-tab").removeClass("emotion-tab-active"),$(this).addClass("emotion-tab-active");var a=$(this).parent().attr("post-id"),t=$("[name="+a+"-emotion-box]"),i=$("[name="+a+"-emotion-more]"),e=$(this).attr("emotion");t.attr("emotion",e),i.attr("emotion",e),k[a]=void 0,w[a]=!0,t.trigger("click")}),$(".like-user-list .more").unbind("click"),$(".like-user-list .more").on("click",function(){var i=$(this),e=i.attr("name"),a=i.parents("[name="+e.split("-")[0]+"-"+e.split("-")[1]+"-user-list-background]"),n=a.siblings(".box").data("post_id"),s=e.split("-")[1],t=s;"silveraward"!=s&&"goldaward"!=s&&"diamondaward"!=s&&"vipgift7days"!=s&&"vipgift30days"!=s&&"vipgift90days"!=s||(t="award");e=BOARD_URL+t+"/post/users",t=i.attr("emotion");if(null==t&&(t=99),"like"==s){if(!_[n])return;var o=_[n]}else if("dislike"==s){if(!f[n])return;o=f[n]}else if("emotion"==s){if(!k[n])return;o=k[n]}else if("silveraward"==s){if(!b[n])return;o=b[n]}else if("goldaward"==s){if(!A[n])return;o=A[n]}else if("diamondaward"==s){if(!R[n])return;o=R[n]}else if("vipgift7days"==s){if(!S[n])return;o=S[n]}else if("vipgift30days"==s){if(!j[n])return;o=j[n]}else if("vipgift90days"==s){if(!x[n])return;o=x[n]}var d=a.find("ul"),r={post_id:n,start:o};switch(s){case"silveraward":r.award_type=1;break;case"goldaward":r.award_type=2;break;case"diamondaward":r.award_type=3;break;case"vipgift7days":r.award_type=4;break;case"vipgift30days":r.award_type=5;break;case"vipgift90days":r.award_type=6}"emotion"==s&&(r.emotion_type=t),$.get(e,r,function(e){if(e&&e.start&&e.data&&e.data.length){"like"==s?_[n]=e.start:"dislike"==s?f[n]=e.start:"dislike"==s?k[n]=e.start:"silveraward"==s?b[n]=e.start:"goldaward"==s?A[n]=e.start:"diamondaward"==s?R[n]=e.start:"vipgift7days"==s?S[n]=e.start:"vipgift30days"==s?j[n]=e.start:"vipgift90days"==s&&(x[n]=e.start);for(var a,t=0;t<e.data.length;t++)e.data[t].avatar&&e.data[t].username&&(a="<li>"+e.data[t].avatar+e.data[t].username+"</li>",""!=e.data[t].emotion&&(a="<li><div class='li-emotion'>"+e.data[t].avatar+e.data[t].emotion+"</div>"+e.data[t].username+"</li>"),d.append(a));e.data.length<5&&i.addClass("hide")}else i.addClass("hide")},"json")}),TRY_PIN_TOPIC&&!U_MODERATE_PIN_TOPIC&&TT.lSAva&&(localStorage.getItem("prompted_pin_topic")||(t.click(),localStorage.setItem("prompted_pin_topic","1"),gaSendEvent("pin_topic","auto_prompt_pin_topic","topic")))}SetupPostJs();